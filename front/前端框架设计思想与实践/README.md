# 前端框架编程思想与实践  

#### 工作中需要搭建一个高效简洁可扩张的前端框架(模板) ,所以此文探讨软件工程乃至前端框架的一些想法和感悟

## 一. 软件系统设计

1. 软件系统特性

    在设计乃至搭建一个框架之前, 我们来思考一下一个好的软件系统应该具备什么特性? 可以需要具备以下特性:

    * 模块化
    * 可复用性
    * 简洁性
    * 可读性
    * ...

    其中哪个最重要? 或者说在编程的时候最应该注重什么? 我认为答案的应该是 '模块化'

    在我的编程经验中, 可复用性,简洁性,可读性等固然重要, 但是过于强调这些, 会给开发工作带来很大负担
    
    曾经有同事在初始框架设计时, 就希望软件可以兼容多个平台, 这样导致了代码侵入了大量业务无关代码, 并且使得目录结构非常怪异, 可读性很差, 而且最后代码复用性斌没有提高.

    正确的做法应该是首要考虑模块化; 当代码模块化做的很好时, 各个部件(组件)之间职责分配明确, 甚至可以达到可拔插, 即模块之间就像积木一样, 添加或是拿掉一个模块, 整个软件任然可以有效的配合和运行. 当系统具有理想的模块化的时候, 可复用性, 简洁性和可读性就自认而然了. 
    
    * 需要代码复用时, 只需要针对各个平台的封装底层完成各自的实现, 而平台具体实现的模块对外界统一暴露一致的接口, 理想化来说, 对于其他模块来说, 是感知不到环境的差别的
    *  简洁性和可读性来说, 业务代码只需要处理具体业务, 软件系统的基本功能通过模块封装好,业务不需要知道具体实现


2. 模块化编程

    众所周知, 软件设计的终极目标就是: '高内聚,低耦合', 模块化(组件化)编程其实也就是 '高内聚,低耦合'的思想

    > 耦合性：也称块间联系。指软件系统结构中各模块间相互联系紧密程度的一种度量。模块之间联系越紧密，其耦合性就越强，模块的独立性则越差。模块间耦合高低取决于模块间接口的复杂性、调用的方式及传递的信息
    
    >内聚性：又称块内联系。指模块的功能强度的度量，即一个模块内部各个元素彼此结合的紧密程度的度量。若一个模块内各元素（语名之间、程序段之间）联系的越紧密，则它的内聚性就越高。

    >所谓高内聚是指一个软件模块是由相关性很强的代码组成，只负责一项任务，也就是常说的单一责任原则。耦合：一个软件结构内不同模块之间互连程度的度量。
    >对于低耦合，粗浅的理解是：一个完整的系统，模块与模块之间，尽可能的使其独立存在。也就是说，让每个模块，尽可能的独立完成某个特定的子功能。模块与模块之间的接口，尽量的少而简单。如果某两个模块间的关系比较复杂的话，最好首先考虑进一步的模块划分。这样有利于修改和组合。

    简单来说, 或者在实践上总结为一下两点:

    * dependency less, do more -- 用较少少的依赖, 完成最多的功能, 暴露简单的api; 举例来说,前端组件化就是,组件内部封装样式及逻辑暴露属性,外部组件无需知道内部实现,就可以调用
    * change less, enhance more -- 当功能需要变化的时候, 尽量不要侵入新的代码, 而是通过增加新的模块, 增强功能; 例如Hoc, redux/koa中的中间件机制, java中的AOP(面向切片编程)以及js中的装饰器

    上文说道设计模式, 再概略谈一下设计原则SOLID:
    
    * S 单一职责原则
    * O 开发封闭原则
    * L 里式替换原则
    * I 接口独立原则
    * D 依赖导致原则

    设计模式一般来说是指OOP的设计模式, js不是完整面向对象的语言, LID 并不适用于js, 并且(前端)实际使用很少. 而SO是任何语言都适用的设计原则, 其实两者描述的也就是模块化(组件化)编程

    > ps: 补充一下前端代码规范:
    > *  一个文件只能有一个类组件(一般用于处理UI逻辑); 组件不要写的太长, 文件太大影响可读性
    > * 数据和逻辑分离; 可以把组件的可配置部分抽离出来(比如说option)放在一个单独的文件中, 这样既可以减小组件的的大小, 并且后续需求改变只需改动配置, 无需改动组件逻辑





